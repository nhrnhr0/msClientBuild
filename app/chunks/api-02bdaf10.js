import{u as c,g as h,S as f,L as S,G as T,e as p,f as y,h as _}from"./cookies-a4d03e43.js";import{a6 as u}from"./vendor-9f1a2415.js";let l={};function O(o){let e={logs:o,uid:g()};return s(S,{method:"POST",body:JSON.stringify(e)})}function s(o,e,t,a=!1){let r={"Content-Type":"application/json","Content-Type":"application/json; charset=UTF-8"};e&&e.method=="POST"?(r["X-CSRFToken"]=h("csrftoken"),console.log("set scft token: ",r["X-CSRFToken"])):console.log("csrf token is unneed"),u(c).access&&(r.Authorization="Token "+u(c).access),console.log("headers_json: ",r);var m=new Headers(r);e=Object.assign({},{method:"GET",mode:"cors",credentials:"include",headers:m,redirect:"follow"},e);let d;try{d=t?t(o,e):fetch(o,e)}catch(n){console.error(n)}return d.then(n=>{if(n.status==401){console.log("data.status == 401");let i=u(c);if(i.isLogin=!1,i.access=null,c.set(i),!a)return s(o,e,t,!0)}return n.json()}).then(n=>(console.log(n),n))}function j(o){return s(p+"?q="+encodeURIComponent(o))}function v(o,e){if(console.log("get_album_details: ",o),l[o])return console.log("return ",o," from cache"),l[o];{console.log("return ",o," from server"),console.log("fetch from: ",f+"/_get_album_images/"+o);let t=s(f+"/_get_album_images/"+o,{method:"GET"},e);return l[o]=t,l[o]}}async function C(){let o=g(),e="/";o&&(e+=o);let t=await s(T+e);var a;a=t.uid,localStorage.setItem("uuid",a),console.log("response: ",t),console.log(document.cookie)}function g(){return localStorage.getItem("uuid")}function P(o){console.log(o);var e={method:"POST",body:JSON.stringify(o)};let t;return t=s(y,e),t}function w(o){var e={method:"POST",body:JSON.stringify(o)};let t;return t=s(_,e),t}export{j as a,O as b,g as c,w as d,s as f,v as g,C as r,P as s};
