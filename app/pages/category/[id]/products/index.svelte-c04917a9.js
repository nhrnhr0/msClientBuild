import{a7 as d,S,i as _,s as v,e as w,t as f,c as x,a as C,g as p,d as h,b as m,f as g,E as T,h as P,l as b,M as j,_ as A}from"../../../../chunks/vendor-ab4be69b.js";import{u as i,g as F,S as G}from"../../../../chunks/cookies-d7879264.js";import{i as O}from"../../../../chunks/utils-6e4fb32a.js";let l={};function k(c,t,r,s=!1){let e={"Content-Type":"application/json","Content-Type":"application/json; charset=UTF-8"};t&&t.method=="POST"&&(e["X-CSRFToken"]=F("csrftoken")),d(i).access&&(e.Authorization="Token "+d(i).access);var o=new Headers(e);t=Object.assign({},{method:"GET",mode:"cors",credentials:"include",headers:o,redirect:"follow"},t);let n;try{n=r?r(c,t):fetch(c,t)}catch(a){console.error(a)}return n.then(a=>{if(a.status==401){let u=d(i);if(u.isLogin=!1,u.access=null,i.set(u),!s)return k(c,t,r,!0)}return console.log(c," ==> ",a.status),a.json()}).then(a=>a)}function y(c,t,r){const s=c.slice();return s[1]=t[r],s}function E(c){let t,r,s,e,o=c[1].id+"";return{c(){t=w("a"),r=f("Product "),s=f(o),this.h()},l(n){t=x(n,"A",{href:!0});var a=C(t);r=p(a,"Product "),s=p(a,o),a.forEach(h),this.h()},h(){m(t,"href",e="./products/"+c[1].id+"/")},m(n,a){g(n,t,a),T(t,r),T(t,s)},p(n,a){1&a&&o!==(o=n[1].id+"")&&P(s,o),1&a&&e!==(e="./products/"+n[1].id+"/")&&m(t,"href",e)},d(n){n&&h(t)}}}function $(c){let t,r=c[0],s=[];for(let e=0;e<r.length;e+=1)s[e]=E(y(c,r,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=b()},l(e){for(let o=0;o<s.length;o+=1)s[o].l(e);t=b()},m(e,o){for(let n=0;n<s.length;n+=1)s[n].m(e,o);g(e,t,o)},p(e,[o]){if(1&o){let n;for(r=e[0],n=0;n<r.length;n+=1){const a=y(e,r,n);s[n]?s[n].p(a,o):(s[n]=E(a),s[n].c(),s[n].m(t.parentNode,t))}for(;n<s.length;n+=1)s[n].d(1);s.length=r.length}},i:j,o:j,d(e){A(s,e),e&&h(t)}}}const N=!1;async function R({page:c,fetch:t,session:r,contex:s}){if(O(c.params.id))return{props:{products:await function(e,o){if(l[e])return l[e];{let n=k(G+"/_get_album_images/"+e,{method:"GET"},o);return l[e]=n,l[e]}}(c.params.id,t)}}}function z(c,t,r){let{products:s}=t;return c.$$set=e=>{"products"in e&&r(0,s=e.products)},[s]}class U extends S{constructor(t){super(),_(this,t,z,$,v,{products:0})}}export{U as default,N as hydrate,R as load};
