import{a7 as d,S,i as _,s as v,e as w,t as f,c as x,a as C,g as p,d as h,b as m,f as g,E as T,h as P,l as b,M as j,_ as A}from"../../../../chunks/vendor-ab4be69b.js";import{u as i,g as F,S as G}from"../../../../chunks/cookies-d7879264.js";import{i as O}from"../../../../chunks/utils-6e4fb32a.js";let l={};function k(c,t,a,s=!1){let e={"Content-Type":"application/json","Content-Type":"application/json; charset=UTF-8"};t&&t.method=="POST"&&(e["X-CSRFToken"]=F("csrftoken")),d(i).access&&(e.Authorization="Token "+d(i).access);var n=new Headers(e);t=Object.assign({},{method:"GET",mode:"cors",credentials:"include",headers:n,redirect:"follow"},t);let o;try{o=a?a(c,t):fetch(c,t)}catch(r){console.error(r)}return o.then(r=>{if(r.status==401){let u=d(i);if(u.isLogin=!1,u.access=null,i.set(u),!s)return k(c,t,a,!0)}return r.json()}).then(r=>r)}function y(c,t,a){const s=c.slice();return s[1]=t[a],s}function E(c){let t,a,s,e,n=c[1].id+"";return{c(){t=w("a"),a=f("Product "),s=f(n),this.h()},l(o){t=x(o,"A",{href:!0});var r=C(t);a=p(r,"Product "),s=p(r,n),r.forEach(h),this.h()},h(){m(t,"href",e="./products/"+c[1].id+"/")},m(o,r){g(o,t,r),T(t,a),T(t,s)},p(o,r){1&r&&n!==(n=o[1].id+"")&&P(s,n),1&r&&e!==(e="./products/"+o[1].id+"/")&&m(t,"href",e)},d(o){o&&h(t)}}}function $(c){let t,a=c[0],s=[];for(let e=0;e<a.length;e+=1)s[e]=E(y(c,a,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=b()},l(e){for(let n=0;n<s.length;n+=1)s[n].l(e);t=b()},m(e,n){for(let o=0;o<s.length;o+=1)s[o].m(e,n);g(e,t,n)},p(e,[n]){if(1&n){let o;for(a=e[0],o=0;o<a.length;o+=1){const r=y(e,a,o);s[o]?s[o].p(r,n):(s[o]=E(r),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=a.length}},i:j,o:j,d(e){A(s,e),e&&h(t)}}}async function N({page:c,fetch:t,session:a,contex:s}){if(console.log(c.params.id),O(c.params.id)){let e=await function(n,o){if(l[n])return l[n];{let r=k(G+"/_get_album_images/"+n,{method:"GET"},o);return l[n]=r,l[n]}}(c.params.id,t);return console.log(e),{props:{products:e}}}}function z(c,t,a){let{products:s}=t;return c.$$set=e=>{"products"in e&&a(0,s=e.products)},[s]}class R extends S{constructor(t){super(),_(this,t,z,$,v,{products:0})}}export{R as default,N as load};
